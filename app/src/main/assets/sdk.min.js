(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>J});var r,n,o,i=(r=!1,n=!1,o=1,{get isProxy(){return r},set isProxy(t){r=t},get SERVER_URL(){return r?"http://localhost:13258":"https://save.gameslog.top"},get TEST_URL(){return"".concat(this.SERVER_URL,"/api/health")},LOCAL_MODE:!1,DEBUG:!1,get isDebug(){return n},set isDebug(t){n=t},get platform(){return o},set platform(t){o=t}}),a="game_enter",c="game_uptime",s="game_score",u="game_level",l="sound_paused",f="sound_resumed",d="ads_opened",h="ads_closed",p="fps_set",g="difficulty_set";var y={isSound:!0,set:function(t){this.isSound=t},pauseAll:function(){this.set(!1),i.isDebug&&console.log("æš‚åœå£°éŸ³")},resumeAll:function(){this.set(!0),i.isDebug&&console.log("æ¢å¤å£°éŸ³")}},v={fps:60,difficulty:0,setFps:function(t){this.fps=t,i.isDebug&&console.log("è®¾ç½®FPS:",t)},setDifficulty:function(t){this.difficulty=t,i.isDebug&&console.log("è®¾ç½®éš¾åº¦:",t)}},w={adInstance:null,loadAdSDK:function(){return new Promise((function(t,e){var r=document.createElement("script");r.src="https://www.cpsense.com/public/PRESDK3.0.1.js",r.async=!0,r.onload=function(){w.initAdSDK(),t()},r.onerror=e,document.head.appendChild(r)}))},initAdSDK:function(){w.adInstance=new adSdk({el:document.querySelector("#adcontent"),client:"cpsense-cd",is_test:!0})},adSdkShowAd:function(t){return new Promise((function(e,r){var n=setTimeout((function(){r("å¹¿å‘Šå±•ç¤ºè¶…æ—¶")}),5e3);if(!w.adInstance)return console.warn("Ad SDK æœªåˆå§‹åŒ–"),void r("Ad SDK æœªåˆå§‹åŒ–");w.showAd(t,(function(t){clearTimeout(n),t?e(!0):r("å¹¿å‘ŠæœªæˆåŠŸå±•ç¤º")}))}))},showAd:function(t,e){if(!w.adInstance)return console.warn("Ad SDK not initialized"),void(null==e||e(!1));var r;switch(t){case"fristAd":r=w.showFristAd;break;case"interstitial":r=w.showInterstitialAd;break;case"rewarded":r=w.showRewardedAd}r?r(e):(console.warn("æœªçŸ¥å¹¿å‘Šç±»å‹:",t),e(!1))}},m={isReady:!1,get isTest(){return"development"===window.ENV_MODE},checkSDKReady:function(){this.isTest||window.AndroidAds?(this.isReady=!0,console.log("âœ… AndroidAds SDK å·²åŠ è½½")):console.warn("âš ï¸ AndroidAds SDK æœªåŠ è½½")},loadAdSDK:function(){var t=this;return new Promise((function(e,r){return console.log("isTest:",t.isTest),t.isTest?(window.AndroidAds={showAd:function(t){console.log("Android_showAd (Test Mode)",t),setTimeout((function(){"function"==typeof window.androidAdsCallback?window.androidAdsCallback("success"):console.log("å›è°ƒå‡½æ•°ä¸å­˜åœ¨")}),3e3)}},t.isReady=!0,e("AndroidAds SDKåŠ è½½æˆåŠŸ!!!"),window.AndroidAds):void 0!==window.AndroidAds?(t.isReady=!0,e("AndroidAds SDKåŠ è½½æˆåŠŸ!!!"),window.AndroidAds):(t.isReady=!1,r("AndroidAds SDK åŠ è½½å¤±è´¥"),window.AndroidAds)}))},showAd:function(t){return new Promise((function(e,r){if(!window.AndroidAds)return console.error("âŒ AndroidAds SDK æœªåˆå§‹åŒ–"),void r("AndroidAds SDK æœªåˆå§‹åŒ–");console.log("ğŸ“¢ è°ƒç”¨ AndroidAds.showAd(".concat(t,")"));window.androidAdsCallback=function(t){"success"===t?(console.log("ğŸ‰ Android å¹¿å‘Šå±•ç¤ºæˆåŠŸ"),clearTimeout(timeoutId),e(!0)):(console.log("âš ï¸ Android å¹¿å‘Šå±•ç¤ºå¤±è´¥"),r("Android å¹¿å‘ŠæœªæˆåŠŸå±•ç¤º"))};try{window.AndroidAds.showAd(t)}catch(t){console.error("âŒ è°ƒç”¨ AndroidAds.showAd å¤±è´¥",t),r(t)}}))}},b={loadAdSDK:function(){return window.FacebookSdk},showAd:function(t){console.warn("Facebook å¹¿å‘Šå±•ç¤ºè¶…æ—¶")}},S={loadAdSDK:function(){return window.YandexSdk},showAd:function(t){console.warn("Yandex å¹¿å‘Šå±•ç¤ºè¶…æ—¶")}},A={isAds:!0,isReady:{set:function(t){this.isReady=t},get:function(){return this.isReady}},sdkType:"cpsense",set:function(t){this.isAds=t},open:function(){this.set(!0),i.isDebug&&console.log("å¯ç”¨å¹¿å‘Š")},close:function(){this.set(!1),i.isDebug&&console.log("ç¦ç”¨å¹¿å‘Š")},currentAdSDK:null,loadAdSDK:function(t){var e=this;this.isReady=!1,this.sdkType=t;var r={android:m,cpsense:w,facebook:b,yandex:S};this.currentAdSDK=r[t]||null,"function"==typeof this.currentAdSDK.loadAdSDK?this.currentAdSDK.loadAdSDK().then((function(){e.isReady=!0,console.log("ğŸ‰ [".concat(t,"] å¹¿å‘Š SDK åŠ è½½å®Œæˆï¼ŒisReady = true"))})).catch((function(e){console.error("âŒ [".concat(t,"] å¹¿å‘Š SDK åŠ è½½å¤±è´¥:"),e)})):(this.isReady=!0,console.log("ğŸ‰ [".concat(t,"] å¹¿å‘Š SDK åˆå§‹åŒ–å®Œæˆ")))},showAd:function(t){var e=this;return new Promise((function(r,n){return e.isAds?e.currentAdSDK?void("cpsense"===e.sdkType?e.currentAdSDK.adSdkShowAd(t).then(r).catch(n):e.currentAdSDK.showAd(t).then(r).catch(n)):(console.warn("å¹¿å‘Š SDK æœªåˆå§‹åŒ–"),void n("å¹¿å‘Š SDK æœªåˆå§‹åŒ–")):(console.warn("å¹¿å‘Šå·²è¢«ç¦ç”¨ï¼Œæ— æ³•æ’­æ”¾å¹¿å‘Š"),void n("å¹¿å‘Šå·²ç¦ç”¨"))}))}},E={get:function(){var t=navigator.userAgent.toLowerCase();return{platform:this.getPlatform(t),browser:this.getBrowser(t),os:this.getOS(t),language:navigator.language,url:window.location.href}},getPlatform:function(t){return/mobile|android|ios/i.test(t)?"mobile":"desktop"},getBrowser:function(t){return/chrome/i.test(t)?"chrome":/firefox/i.test(t)?"firefox":/safari/i.test(t)?"safari":"other"},getOS:function(t){return/android/i.test(t)?"android":/ios/i.test(t)?"ios":/windows/i.test(t)?"windows":/mac/i.test(t)?"macos":"other"}};function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}var O={storage:{get:function(t){try{return localStorage.getItem(t)}catch(t){return console.warn("localStorageè¯»å–å¤±è´¥:",t),null}},set:function(t,e){try{return localStorage.setItem(t,e),!0}catch(t){return console.warn("localStorageå†™å…¥å¤±è´¥:",t),!1}}},cookie:{set:function(t,e,r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),document.cookie="".concat(t,"=").concat(e,";expires=").concat(n.toUTCString(),";path=/")},get:function(t){for(var e=t+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length)}return null}}};function k(){var t,e,r=O.storage.get("userId");return r||(r=O.cookie.get("userId")),r||(t=Date.now().toString(36),e=Math.random().toString(36).substring(2,6),r="user_".concat(t,"_").concat(e),O.storage.set("userId",r),O.cookie.set("userId",r,365)),r}function L(t){return t&&"object"===D(t)&&!Array.isArray(t)}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(){I=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",y={};function v(){}function w(){}function m(){}var b={};u(b,a,(function(){return this}));var S=Object.getPrototypeOf,A=S&&S(S(j([])));A&&A!==r&&n.call(A,a)&&(b=A);var E=m.prototype=v.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==x(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=d;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?g:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(x(e)+" is not iterable")}return w.prototype=m,o(E,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:w,configurable:!0}),w.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},_(D.prototype),u(D.prototype,c,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new D(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function R(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function K(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,c,"next",t)}function c(t){R(i,n,o,a,c,"throw",t)}a(void 0)}))}}var N,C,M,G={initialized:!1,userId:null,gameSessionId:null,init:(M=K(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,G.userId=k(),G.gameSessionId=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})),i.isDebug&&console.log("åˆå§‹åŒ–ID:",{userId:G.userId,gameSessionId:G.gameSessionId}),t.next=8,fetch(i.TEST_URL);case 8:if(t.sent.ok){t.next=11;break}throw new Error("Server unreachable");case 11:this.initialized=!0,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),console.warn("Server unreachable, operating in local mode"),i.LOCAL_MODE=!0;case 18:case"end":return t.stop()}}),t,this,[[2,14]])}))),function(){return M.apply(this,arguments)}),userEvent:(C=K(I().mark((function t(e){var r,n,o=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},!i.LOCAL_MODE){t.next=4;break}return i.isDebug&&console.log("Local mode - Event:",e,r),t.abrupt("return");case 4:if(G.userId&&G.gameSessionId){t.next=7;break}return console.error("Missing required IDs",{userId:G.userId,sessionId:G.gameSessionId}),t.abrupt("return");case 7:n=P({user_id:G.userId,session_id:G.gameSessionId,event_type:e,timestamp:(new Date).toISOString(),device_info:E.get()},r),this.sendReport(i.SERVER_URL+"/api/users/register",n);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return C.apply(this,arguments)}),startReporting:function(){i.LOCAL_MODE},reportEvent:(N=K(I().mark((function t(e){var r,n,o=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},!i.LOCAL_MODE){t.next=4;break}return i.isDebug&&console.log("Local mode - Event:",e,r),t.abrupt("return");case 4:if(G.userId&&G.gameSessionId){t.next=7;break}return console.error("Missing required IDs",{userId:G.userId,sessionId:G.gameSessionId}),t.abrupt("return");case 7:n=P({user_id:G.userId,session_id:G.gameSessionId,event_type:e,timestamp:(new Date).toISOString(),device_info:E.get()},r),this.sendReport("".concat(i.SERVER_URL,"/api/events/save"),n);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return N.apply(this,arguments)}),reportGameEnter:function(){this.reportEvent(a,{game_start_time:(new Date).toISOString()})},reportGameTime:function(){this.reportEvent(c)},reportGameScore:function(t){this.reportEvent(s,{game_score:t})},reportLevelProgress:function(t,e){this.reportEvent(u,{level_number:t,progress:e})},reportSoundState:function(t){this.reportEvent(t?f:l,{state:t?"OPEN":"CLOSE"})},reportAdsState:function(t){this.reportEvent(t?d:h,{state:t?"OPEN":"CLOSE"})},reportFpsSet:function(t){this.reportEvent(p,{rate:t})},reportDifficultySet:function(t){this.reportEvent(g,{level:t})},sendReport:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!i.LOCAL_MODE){i.isDebug&&console.log("æ­£åœ¨ä¸ŠæŠ¥:",JSON.stringify(e,null,2));var n=function(r){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){var e;if(!t.ok)throw new Error("HTTP error: ".concat(t.status));return null!==(e=t.headers.get("content-type"))&&void 0!==e&&e.includes("application/json")?t.json():t.text()})).then((function(t){i.isDebug&&console.log("ä¸ŠæŠ¥æˆåŠŸ:","string"==typeof t?t:JSON.stringify(t,null,2))})).catch((function(t){r>0?(console.warn("ä¸ŠæŠ¥å¤±è´¥,å‰©ä½™é‡è¯•æ¬¡æ•°: ".concat(r-1),t),setTimeout((function(){return n(r-1)}),1e3)):console.error("ä¸ŠæŠ¥å¤±è´¥,é‡è¯•æ¬¡æ•°ç”¨å°½:",t)}))};n(r)}}},F={channel_cd:100};const U={loadingComplete:function(t,e){i.isDebug&&console.log("loadingComplete",t,e)},loadingUpdate:function(t,e){i.isDebug&&console.log("loadingUpdate",t,e)},levelStart:function(t,e){i.isDebug&&console.log("levelStart",t,e)},nothing:function(t){i.isDebug&&console.log("nothing",t)},trigger:function(t,e,r){switch(t){case"restore":o=r,(n=e).callback.call(o,null,localStorage.getItem(n.key));break;case"loading.completed":this.loadingComplete(e,r);break;case"loading.update":this.loadingUpdate(e,r);break;case"levelStart":this.levelStart(e,r);break;case"gameTracking":case"start":case"levelFinish":this.nothing(e);break;case"save":!function(t,e){localStorage.setItem(t.key,t.value),t.callBack&&t.callback.call(e)}(e,r);break;case"gameOver":case"beforePlayButtonDisplay":case"playButtonPressed":!function(t,e){t.callback.call(e)}(e,r);break;default:i.isDebug&&console.log("No event")}var n,o}};function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function V(){V=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",y={};function v(){}function w(){}function m(){}var b={};u(b,a,(function(){return this}));var S=Object.getPrototypeOf,A=S&&S(S(P([])));A&&A!==r&&n.call(A,a)&&(b=A);var E=m.prototype=v.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==z(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=d;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?g:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(z(e)+" is not iterable")}return w.prototype=m,o(E,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:w,configurable:!0}),w.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},_(D.prototype),u(D.prototype,c,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new D(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function B(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}window.ENV_MODE="production";var Y,q,J={isDot:!1,sdkType:"default",ex_ovo:{version:"1.1.0",config:i,SoundManager:y,GameSettings:v,ReportManager:G,AdManager:A,showAd:A.showAd.bind(A),trigger:U.trigger.bind(U),deepCopy:function t(e){if("object"!==D(e)||null===e)return e;var r;if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}else for(var o in r={},e)e.hasOwnProperty(o)&&(r[o]=t(e[o]));return r},deepMerge:function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if(!n.length)return e;var i=n.shift();if(L(e)&&L(i))for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(L(i[a])?(e[a]||Object.assign(e,_({},a,{})),t(e[a],i[a])):e[a]=i[a]);return t.apply(void 0,[e].concat(n))},loadScript:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/javascript",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(o,i){var a=document.createElement("script");a.src=t,a.type=e,a.async=r,n&&(a.crossOrigin=n),a.onload=function(){o()},a.onerror=function(){i(new Error("Failed to load script: ".concat(t)))},document.head.appendChild(a)}))},TopCallback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(console.log("call top message!",t),window.TopCallback&&window.TopCallback(),t===F.channel_cd)window.top__woso,console.log("call top message cd!"),window.top__woso.SoundManager.isSound?window.__woso.SoundManager.resumeAll():window.__woso.SoundManager.pauseAll(),window.top__woso.AdManager.isAds?window.__woso.TargetedAds.open():window.__woso.TargetedAds.clos()},setSdkType:function(t){J.sdkType=t,console.log("SDK ç±»å‹å·²è®¾ç½®ä¸º:",t),A.loadAdSDK(J.sdkType)},get sdkType(){return J.sdkType}},initialize:(Y=V().mark((function t(){var e,r,n,o,a;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=new URLSearchParams(window.location.search),r={},e.forEach((function(t,e){r[e]=t})),i.isDebug&&console.log(r),"true"===r.sound?y.resumeAll():y.pauseAll(),n=Number(r.fps),v.setFps(isNaN(n)?60:n),o=Number(r.diff),v.setDifficulty(isNaN(o)?0:o),"true"===r.ads?A.open():A.close(),r.sdkType&&(J.sdkType=r.sdkType,console.log("SDK ç±»å‹é€šè¿‡ URL è®¾å®šä¸º:",J.sdkType)),console.log("SDK version:",J.ex_ovo.version),t.next=17,fetch(i.TEST_URL);case 17:if(!(a=t.sent).ok){t.next=34;break}return i.LOCAL_MODE=!1,J.isDot=!0,console.log("æ ¡æ£€æˆåŠŸ!!!"),t.prev=22,t.next=25,G.init();case 25:i.isDebug&&console.log("ReportManager initialized with userId:",G.userId),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(22),console.error("Failed to initialize ReportManager:",t.t0);case 31:i.isDebug&&console.log("æˆåŠŸè¿æ¥æœåŠ¡å™¨, å¯ç”¨å®Œæ•´åŠŸèƒ½"),t.next=35;break;case 34:i.isDebug&&console.log("è¿æ¥æœåŠ¡å¤±è´¥",a);case 35:t.next=40;break;case 37:t.prev=37,t.t1=t.catch(0),i.isDebug&&console.log("æ— æ³•è¿æ¥æœåŠ¡å™¨, ä»…å¯ç”¨æœ¬åœ°åŠŸèƒ½");case 40:case"end":return t.stop()}}),t,null,[[0,37],[22,28]])})),q=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=Y.apply(t,e);function i(t){B(o,r,n,i,a,"next",t)}function a(t){B(o,r,n,i,a,"throw",t)}i(void 0)}))},function(){return q.apply(this,arguments)})};"undefined"!=typeof window&&(J.initialize().then((function(){})).catch(console.error),window.ovo=J.ex_ovo),window.GameSDK=e.default})();