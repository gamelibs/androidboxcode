System.register("chunks:///_virtual/ButtonController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./GameEvent.ts","./LevelModel.ts","./NutManager.ts","./AdvertMgr.ts","./tgx.ts","./GlobalConfig.ts","./LevelMgr.ts","./UITips.ts"],(function(n){var t,e,i,o,r,a,s,c,u,l,d,f,h,E,p,v,g,b;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,s=n.Button,c=n.NodeEventType,u=n.find,l=n.Component},function(n){d=n.EventDispatcher},function(n){f=n.GameEvent},function(n){h=n.TYPE_ITEM},function(n){E=n.NutManager},function(n){p=n.AdvertMgr},null,function(n){v=n.GlobalConfig},function(n){g=n.LevelManager},function(n){b=n.UITips}],execute:function(){var D,C,M,T,_,U,N;r._RF.push({},"9305cbWME9O2JCw4HjuOf8O","ButtonController",void 0);var I=a.ccclass,w=a.property;n("ButtonController",(D=I("ButtonController"),C=w(s),M=w(s),D((U=t((_=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"btUndo",U,o(t)),i(t,"btAddScrew",N,o(t)),t.nutManager=null,t}e(t,n);var r=t.prototype;return r.onLoad=function(){this.setupUIListeners()},r.start=function(){this.addUIEvent()},r.addUIEvent=function(){var n=this;this.btUndo.node.on(c.TOUCH_END,(function(){return n.onClickHandler(h.REVOKE)}),this),this.btAddScrew.node.on(c.TOUCH_END,(function(){return n.onClickHandler(h.ADDNUT)}),this)},r.setupUIListeners=function(){var n=this;[{event:f.EVENT_UI_INITILIZE,handler:this.onResetAddition}].forEach((function(t){var e=t.event,i=t.handler;return d.instance.on(e,i,n)}))},r.onResetAddition=function(){this.nutManager=u("Canvas").getComponentInChildren(E);var n=g.instance.levelModel.level;this.node.active=1!=n&&2!=n},r.onClickHandler=function(n){if(!this.nutManager.inOperation)switch(n){case h.REVOKE:var t=this.nutManager.operationStack;if(console.log("nutManager",this.nutManager.operationStack),!t||0===t.length)return b.show("There is no revocable operation!"),void(this.nutManager.inOperation=!1);v.isDebug?d.instance.emit(f.EVENT_UNDO_REVOKE):p.instance.showReawardVideo((function(){d.instance.emit(f.EVENT_UNDO_REVOKE)}));break;case h.ADDNUT:v.isDebug?d.instance.emit(f.EVENT_ADD_SCREW):p.instance.showReawardVideo((function(){d.instance.emit(f.EVENT_ADD_SCREW)}))}},t}(l)).prototype,"btUndo",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(_.prototype,"btAddScrew",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=_))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"32675zlaNhPnLUCDa/OwwBE","GameEvent",void 0);var T=E("GameEvent",(function(){}));T.EVENT_UI_INITILIZE="EVENT_UI_INITILIZE",T.EVENT_GAME_START="EVENT_GAME_START",T.EVENT_UNDO_REVOKE="EVENT_UNDO_REVOKE",T.EVENT_ADD_SCREW="EVENT_ADD_SCREW",T.EVENT_UPDATE_STAR_STEP="EVENT_UPDATE_STAR_STEP",T.EVENT_ADD_PARTICLE_ROCK="EVENT_ADD_PARTICLE_ROCK",T.EVENT_ADD_PARTICLE_DUST="EVENT_ADD_PARTICLE_DUST",T.EVENT_ADD_PARTICLE_COLOR_BAR="EVENT_ADD_PARTICLE_COLOR_BAR",T.EVENT_ADD_PARTICLE_OPEN_BOX="EVENT_ADD_PARTICLE_OPEN_BOX",T.EVENT_ADD_PARTICLE_LEVEL_UP="EVENT_ADD_PARTICLE_LEVEL_UP",T.EVENT_CLEAR_ALL_PARTICLE="EVENT_CLEAR_ALL_PARTICLE",T.EVENT_BATTLE_SUCCESS_LEVEL_UP="EVENT_BATTLE_SUCCESS_LEVEL_UP",T.EVENT_BATTLE_FAIL_LEVEL_RESET="EVENT_BATTLE_FAIL_LEVEL_RESET",T.EVENT_USER_MONEY_UPDATE="EVENT_USER_MONEY_UPDATE",_._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_BattleResult.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,l,n,a,o,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,o=e.Button,u=e.Node,c=e.Component}],execute:function(){var s,p,y,b,f,g,h,d,v,_,w;n._RF.push({},"24a1aVlAVBATpkR3PjyDH79","Layout_BattleResult",void 0);var B=a.ccclass,R=a.property;e("Layout_BattleResult",(s=B("Layout_BattleResult"),p=R(o),y=R(u),b=R(u),f=R(u),s((d=t((h=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(t,"btNext",d,l(t)),i(t,"light",v,l(t)),i(t,"winNode",_,l(t)),i(t,"levStars",w,l(t)),t}return r(t,e),t}(c)).prototype,"btNext",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(h.prototype,"light",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(h.prototype,"winNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(h.prototype,"levStars",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_TopInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,l,a,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Label,c=e.ProgressBar,p=e.Component}],execute:function(){var s,b,f,y,g,v,L,m,d,h,z,_,w,R,S;o._RF.push({},"188235riGhBR4PThN1I4qYE","Layout_TopInfo",void 0);var I=l.ccclass,P=l.property;e("Layout_TopInfo",(s=I("Layout_TopInfo"),b=P(a),f=P(a),y=P(a),g=P(u),v=P(u),L=P(c),s((h=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"btSet",h,i(t)),n(t,"btReLoad",z,i(t)),n(t,"levStars",_,i(t)),n(t,"lbLevel",w,i(t)),n(t,"lbRemainingSteps",R,i(t)),n(t,"levProgress",S,i(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(p)).prototype,"btSet",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(d.prototype,"btReLoad",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"levStars",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(d.prototype,"lbLevel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(d.prototype,"lbRemainingSteps",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(d.prototype,"levProgress",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelModel.ts","./GlobalConfig.ts","./EventDispatcher.ts","./GameEvent.ts","./ResLoader.ts"],(function(e){var t,l,n,r,a,o,i,s,v,c,u,d,h,f;return{setters:[function(e){t=e.createClass,l=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,o=e.sys,i=e.assetManager,s=e.Prefab,v=e.instantiate},function(e){c=e.LevelModel},function(e){u=e.GlobalConfig},function(e){d=e.EventDispatcher},function(e){h=e.GameEvent},function(e){f=e.resLoader}],execute:function(){var p,L;r._RF.push({},"e31beBv1ZNJsZjWnTyURtoI","LevelMgr",void 0);var M=a.ccclass;a.property,e("LevelManager",M("LevelManager")(((L=function(){function e(){this.parent=null,this.currentLevel=null,this.randomLevel=0,this.levelModel=null}var r=e.prototype;return r.initilizeModel=function(){this.levelModel=new c,this.levelModel.getRandomLevelList(),this.preloadLevel()},r.loadAsyncLevel=function(){var e=l(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,l){i.getBundle(f.gameBundleName)||(console.error("module_nut is null!"),l()),f.loadAsync(f.gameBundleName,"Prefabs/Level/Level"+t,s).then((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.preloadLevel=function(){var e=l(n().mark((function e(){var t,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.getBundle(f.gameBundleName),l=1;l<=u.levelTotal;l++)t.preload("Prefabs/Level/Level"+l,s,null,(function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.loadLevel=function(){var e=l(n().mark((function e(t){var l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=null,!(this.levelModel.level>u.levelTotal)){e.next=7;break}return e.next=4,this.loadAsyncLevel(this.randomLevel);case 4:l=e.sent,e.next=10;break;case 7:return e.next=9,this.loadAsyncLevel(t);case 9:l=e.sent;case 10:if(this.currentLevel&&this.currentLevel.destroy(),l){e.next=13;break}return e.abrupt("return");case 13:this.currentLevel=v(l),this.parent.removeAllChildren(),this.parent.addChild(this.currentLevel),this.currentLevel.active=!0;case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.upgradeLevel=function(e){if(void 0===e&&(e=1),this.levelModel.level+=e,o.localStorage.setItem("TheNutBreaker_level",this.levelModel.level.toString()),this.levelModel.level>u.levelTotal){for(var t=this.levelModel.randomLevelList,l=Math.floor(Math.random()*t.length),n=t[l];n===this.randomLevel&&t.length>1;)n=t[l=Math.floor(Math.random()*t.length)];this.randomLevel=n,console.log("随机真实关卡level: "+this.randomLevel),this.levelModel.levelConfig.init(this.randomLevel)}else this.levelModel.levelConfig.init(this.levelModel.level)},r.addLevelStep=function(e){void 0===e&&(e=1),this.levelModel.playerStep+=e,this.calculateStarLevel()},r.backLevelStep=function(e){void 0===e&&(e=1),this.levelModel.playerStep-=e,this.calculateStarLevel()},r.calculateStarLevel=function(){var t=e.instance.levelModel,l=t.mainConfig,n=t.levelConfig,r=l.getStepStar,a=n.step-this.levelModel.playerStep;a>=r[0]?this.levelModel.star=3:a>=r[1]?this.levelModel.star=2:this.levelModel.star=1,d.instance.emit(h.EVENT_UPDATE_STAR_STEP)},r.clearLevelData=function(){this.levelModel.clearLevel()},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,p=L))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelModel.ts",["cc","./JsonUtil.ts","./Tablelevels_config.ts","./GlobalConfig.ts","./MainConfigModel.ts"],(function(e){var t,i,n,l,o,s;return{setters:[function(e){t=e.cclegacy,i=e.sys},function(e){n=e.JsonUtil},function(e){l=e.Tablelevels_config},function(e){o=e.GlobalConfig},function(e){s=e.MainConfigModel}],execute:function(){t._RF.push({},"2fbffo5ChdFtI/uKxhvojkN","LevelModel",void 0);e("TYPE_ITEM",function(e){return e[e.REVOKE=1]="REVOKE",e[e.ADDNUT=2]="ADDNUT",e}({}));var T=e("TYPE_GAME_STATE",function(e){return e[e.GAME_STATE_INIT=0]="GAME_STATE_INIT",e[e.GAME_STATE_START=1]="GAME_STATE_START",e[e.GAME_STATE_END=2]="GAME_STATE_END",e[e.GAME_STATE_RESULT=3]="GAME_STATE_RESULT",e[e.GAME_STATE_PAUSE=4]="GAME_STATE_PAUSE",e}({}));e("LevelModel",function(){function e(){this.levelConfig=void 0,this.mainConfig=void 0,this.level=1,this.playerStep=0,this.star=3,this.levelStarsMap=new Map,this.randomLevelList=[],this.curGameState=T.GAME_STATE_INIT,this.levelConfig=new l;var e=new s;if(this.mainConfig=e.initilizeModel(),o.isDebug)this.level=o.initilizeLevel;else{var t=i.localStorage.getItem("TheNutBreaker_level");this.level=t?parseInt(t):1}this.levelConfig.init(this.level)}var t=e.prototype;return t.getRandomLevelList=function(){var e=n.get(l.TableName);this.randomLevelList=Object.values(e).filter((function(e){return 1==e.random})).map((function(e){return e.level}))},t.clearLevel=function(){this.playerStep=0,this.star=3},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MainConfigModel.ts",["cc","./Tablemain_config.ts"],(function(n){var t,i;return{setters:[function(n){t=n.cclegacy},function(n){i=n.Tablemain_config}],execute:function(){t._RF.push({},"546edeQgIdAfJGKyrx+VAp/","MainConfigModel",void 0);n("MainConfigModel",function(){function n(){this.config=null}var t=n.prototype;return t.initilizeModel=function(){return{adCDTime:this.getPramById(e.AD_CD_TIME),getStepStar:this.getPramById(e.STEP_STAR)}},t.getPramById=function(n){var t=new i;return t.init(n),t.param},n}());var e=function(n){return n[n.AD_CD_TIME=1]="AD_CD_TIME",n[n.STEP_STAR=2]="STEP_STAR",n}(e||{});t._RF.pop()}}}));

System.register("chunks:///_virtual/module_nut",["./Layout_BattleResult.ts","./UI_BattleResult_Impl.ts","./Layout_TopInfo.ts","./UI_TopInfo_Impl.ts","./RoosterNutEntry.ts","./ButtonController.ts","./GameEvent.ts","./ScrewColor.ts","./LevelMgr.ts","./NutGameAudioMgr.ts","./NutManager.ts","./UserMgr.ts","./LevelModel.ts","./MainConfigModel.ts","./MusicConfigModel.ts","./NutData.ts","./ScrewData.ts","./UserModel.ts","./NutComponent.ts","./Ring.ts","./ScrewComponent.ts","./Utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MusicConfigModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tablemusic_config.ts"],(function(i){var n,t,e;return{setters:[function(i){n=i.createClass},function(i){t=i.cclegacy},function(i){e=i.Tablemusic_config}],execute:function(){t._RF.push({},"44ff3K1jUlI1YDE+hiE5OQy","MusicConfigModel",void 0);i("MusicConfigModel",function(){function i(i){void 0===i&&(i=1),this.config=void 0,this.id=void 0,this.id=i,this.config=new e}return i.prototype.getNameById=function(i){return void 0===i&&(i=1),this.config.init(i),this.name},n(i,[{key:"content",get:function(){return this.config.content}},{key:"name",get:function(){return this.config.name}}]),i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NutComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NutData.ts","./EventDispatcher.ts","./GameEvent.ts","./NutGameAudioMgr.ts"],(function(t){var e,i,n,o,r,s,a,c,u,l,p,d,h,w,f,N,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.CCBoolean,u=t.CCFloat,l=t.Vec3,p=t.Tween,d=t.tween,h=t.v3,w=t.Component},function(t){f=t.NutData},function(t){N=t.EventDispatcher},function(t){g=t.GameEvent},function(t){v=t.NutGameAudioMgr}],execute:function(){var m,b,y,S,D,G,C,z,T,P,E,A,_,x,I,R,B,M,O,k,V,F,L;r._RF.push({},"095acCwxW1M7bBzvZB2RItv","NutComponent",void 0);var U=s.ccclass,j=s.property,H=t("duration",.2);t("NutComponent",(m=U("NutComponent"),b=j(a),y=j(a),S=j(a),D=j(a),G=j(a),C=j({type:c,tooltip:"是否归类形"}),z=j({type:u,tooltip:"螺母最大螺丝数量"}),T=j({type:c,tooltip:"是否可增加形"}),P=j({type:u,tooltip:"可增加螺母当前螺丝数量"}),E=j(a),m((x=e((_=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"screwsNode",x,o(e)),n(e,"screwTranslucent",I,o(e)),n(e,"ringsNode",R,o(e)),n(e,"suspensionNode",B,o(e)),n(e,"capNode",M,o(e)),n(e,"isGroup",O,o(e)),n(e,"maxScrews",k,o(e)),n(e,"canGrow",V,o(e)),n(e,"curScrews",F,o(e)),e.isDone=!1,e.data=null,n(e,"ringsUnknowNode",L,o(e)),e}i(e,t);var r=e.prototype;return r.start=function(){},r.initData=function(){this.data=new f,this.data.maxScrews=this.maxScrews,this.data.isGroup=this.isGroup,this.data.isDone=this.isDone,this.data.canGrow=this.canGrow,this.data.curScrews=this.curScrews},r.initilizeScrews=function(){this.updateVisuals()},r.updateVisuals=function(){var t=this;if(this.data.curScrews<=0)return this.screwTranslucent.active=!0,void(this.screwsNode.active=!1);this.screwTranslucent.active=!this.data.canGrow,this.data.canGrow&&(this.screwsNode.active=!0,this.screwsNode.children.forEach((function(e,i){e.active=i<t.data.curScrews}))),this.screwsNode.children.filter((function(t){return t.active})).length>this.data.maxScrews||(N.instance.emit(g.EVENT_ADD_PARTICLE_DUST,this.screwsNode),v.playOneShot(v.getMusicIdName(7),1))},r.getTopRingNode=function(){var t=this.ringsNode.children;return t.length>0?t[t.length-1]:null},r.updateScrewVisibility=function(t){for(var e=this.data.screws,i=null,n=0;n<e.length;n++){var o=e[n];(i=this.ringsNode.children[n])&&(i.active=o.isShow);var r=this.ringsUnknowNode.children[n];r&&(r.active=!o.isShow)}i&&N.instance.emit(g.EVENT_ADD_PARTICLE_OPEN_BOX,[i,t])},r.addRingNode=function(t,e,i){void 0===e&&(e=!1);t.position.clone();var n=e?1:0,o=1.4*(this.ringsNode.children.length-n),r=new l(0,o,0);p.stopAllByTarget(t),t.setParent(this.ringsNode),t.setPosition(this.suspensionNode.position),t.eulerAngles=new l(0,0,0),d(t).to(H,{eulerAngles:new l(0,180,0),position:new l(r.x,r.y,r.z)}).call((function(){i&&(v.playOneShot(v.getMusicIdName(6),1),i())})).start()},r.getSuspensionPosition=function(){return this.suspensionNode.worldPosition},r.displayNutCap=function(t){var e=this;p.stopAllByTarget(this.capNode);var i=1.4*this.ringsNode.children.length;this.capNode.setPosition(h(0,i,0)),t&&(v.playOneShot(v.getMusicIdName(4),1),this.capNode.active=t,this.capNode.setScale(h(0,1,1)),d(this.capNode).to(H,{scale:h(1,1,1),position:h(0,i+1,0)}).delay(H).to(H,{position:h(0,i,0)}).call((function(){e.capNode.setPosition(h(0,i,0))})).start()),this.capNode.active=t},r.getFreeSlots=function(){return this.canGrow?this.data.curScrews-this.ringsNode.children.length:this.maxScrews-this.ringsNode.children.length},r.undoRingNodeOperation=function(t,i){var n=t.opNode,o=t.fromNut,r=t.toNut,s=t.fromPosition,a=(t.toPosition,t.fromScreews),c=t.toScreews;d(n).to(H,{position:this.suspensionNode.position}).call((function(){var t=o.getComponent(e).ringsNode;n.parent=t})).to(H,{position:s}).call((function(){var t=r.getComponent(e).data,n=o.getComponent(e).data;t.screws=c,n.screws=a,n.isDone=n.checkIfGrouped(),t.isDone=t.checkIfGrouped(),i&&i()})).start()},r.growCanOp=function(){return!this.canGrow||!this.screwTranslucent.active},r.hasScrews=function(){return this.screwsNode.children.filter((function(t){return t.active})).length>this.ringsNode.children.length},e}(w)).prototype,"screwsNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(_.prototype,"screwTranslucent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(_.prototype,"ringsNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(_.prototype,"suspensionNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(_.prototype,"capNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"isGroup",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=e(_.prototype,"maxScrews",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),V=e(_.prototype,"canGrow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(_.prototype,"curScrews",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=e(_.prototype,"ringsUnknowNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/NutData.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"7fb99soMo5MBboKWalcz/sG","NutData",void 0);s("NutData",function(){function s(){this.screws=[],this.maxScrews=6,this.isGroup=!1,this.isDone=!1,this.canGrow=!1,this.curScrews=0}var t=s.prototype;return t.isEmpty=function(){return 0===this.screws.length},t.isFull=function(){return!!this.isGroup&&(this.screws.length>0&&this.screws.length>=this.maxScrews)},t.getTopScrew=function(){return this.screws.length>0?this.screws[this.screws.length-1]:null},t.addScrew=function(s){this.screws.length<this.maxScrews&&this.screws.push(s)},t.removeTopScrew=function(){return this.screws.length>0?this.screws.pop():null},t.revealBelowScrews=function(s){for(var t=0,e=this.screws.length-1;e>=0;e--){var r=this.screws[e];if(r.color!==s||r.isShow){if(r.color!==s)break}else r.isShow=!0,t++}return t},t.checkIfGrouped=function(){if(this.isFull()){var s=this.screws[0].color;return this.isDone=this.screws.every((function(t){return t.color===s})),this.isDone}return!1},s}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NutGameAudioMgr.ts",["cc","./tgx.ts","./ModuleDef.ts","./MusicConfigModel.ts","./AudioMgr.ts"],(function(i){var n,t,u,o;return{setters:[function(i){n=i.cclegacy},null,function(i){t=i.ModuleDef},function(i){u=i.MusicConfigModel},function(i){o=i.AudioMgr}],execute:function(){n._RF.push({},"ec579c/9LBOIp1ts6mDSsAW","NutGameAudioMgr",void 0);var e=t.MODULE_NUT;i("NutGameAudioMgr",function(){function i(){}return i.initilize=function(){this._musicConfigModel=new u},i.playOneShot=function(i,n){void 0===n&&(n=1),o.inst.playOneShot(i,n,e)},i.play=function(i,n){void 0===n&&(n=1),o.inst.play(i,n,e)},i.getMusicIdName=function(i){return"Audio/"+this._musicConfigModel.getNameById(i)},i.stop=function(){o.inst.stop()},i.pause=function(){o.inst.pause()},i.resume=function(){o.inst.audioSource.play()},i}())._musicConfigModel=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/NutManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NutComponent.ts","./Ring.ts","./ScrewData.ts","./ScrewColor.ts","./tgx.ts","./UIDef.ts","./EventDispatcher.ts","./GameEvent.ts","./LevelMgr.ts","./NutGameAudioMgr.ts","./AdvertMgr.ts","./GtagMgr.ts","./GlobalConfig.ts","./UITips.ts","./UIMgr.ts"],(function(n){var e,t,o,r,i,a,c,s,u,l,p,d,f,g,v,h,m,N,C,w,S,R,E,T,y,O,D,_,L,I,k,A,b,G,U,x,M;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized,i=n.createForOfIteratorHelperLoose,a=n.extends,c=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){u=n.cclegacy,l=n._decorator,p=n.CameraComponent,d=n.Node,f=n.CCString,g=n.input,v=n.Input,h=n.geometry,m=n.PhysicsSystem,N=n.tween,C=n.Vec3,w=n.Component},function(n){S=n.NutComponent,R=n.duration},function(n){E=n.Ring},function(n){T=n.ScrewData},function(n){y=n.HexScrewColor,O=n.ScrewColor},null,function(n){D=n.UI_BattleResult},function(n){_=n.EventDispatcher},function(n){L=n.GameEvent},function(n){I=n.LevelManager},function(n){k=n.NutGameAudioMgr},function(n){A=n.AdvertMgr},function(n){b=n.GtagMgr,G=n.GtagType},function(n){U=n.GlobalConfig},function(n){x=n.UITips},function(n){M=n.UIMgr}],execute:function(){var P,V,H,B,F,z,K,W,X;u._RF.push({},"1b75d2ZyVVDiIPXdGNcIVEc","NutManager",void 0);var Z=l.ccclass,j=l.property;n("NutManager",(P=Z("NutManager"),V=j({type:p}),H=j([d]),B=j({type:[f],tooltip:"当前关卡需要归类的颜色"}),P((K=e((z=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i))||this,o(e,"camera",K,r(e)),o(e,"nutNodes",W,r(e)),o(e,"levelColorStrings",X,r(e)),e.currentRing=null,e.currentNut=null,e.operationStack=[],e.inOperation=!1,e}t(e,n);var u=e.prototype;return u.onLoad=function(){for(var n,e=i(this.nutNodes);!(n=e()).done;){n.value.active=!0}this.clearData(),_.instance.emit(L.EVENT_UI_INITILIZE)},u.setupUIListeners=function(){g.on(v.EventType.TOUCH_END,this.onTouchEnd,this),_.instance.on(L.EVENT_UNDO_REVOKE,this.onUndoHandler,this),_.instance.on(L.EVENT_ADD_SCREW,this.onAddScrewHandler,this)},u.start=function(){var n=I.instance.levelModel.level;b.inst.doGameDot(G.level_start,{level:n}),U.isDebug||A.instance.showInterstitial(),this.initNuts(),this.setupUIListeners()},u.initNuts=function(){for(var n,e=i(this.nutNodes);!(n=e()).done;)for(var t,o=n.value.getComponent(S),r=o.ringsNode.children,a=i(r);!(t=a()).done;){var c=t.value,s=c.getComponent(E),u=c.active,l=new T(s.color,u);o.data.addScrew(l)}},u.onTouchEnd=function(n){var e=new h.Ray;if(this.camera.screenPointToRay(n.getLocationX(),n.getLocationY(),e),m.instance.raycast(e)){var t=m.instance.raycastResults;if(t.length>0){var o=t[0].collider.node.getComponent(S);o&&this.onNutClicked(o.node)}}},u.onNutClicked=function(n){var e=this,t=this;if(!t.inOperation){t.inOperation=!0;var o=n.getComponent(S),r=o.growCanOp(),i=o.hasScrews();if(!r)return t.inOperation=!1,void x.show("Watching advertisements \n can unlock this nut.");if(o.data.isGroup&&o.data.isDone)t.inOperation=!1;else if(t.currentRing)if(t.currentNut===n)t.moveRingToNut(t.currentRing,o,!0),t.resetCurrentSelection(),t.inOperation=!1;else{var a=o.data.getTopScrew(),c=t.currentRing.getComponent(E).color;if(a&&a.color!==c){x.show("Can only move to the same color \n or empty position");var s=t.currentRing.parent.parent.getComponent(S);t.moveRingToNut(t.currentRing,s,!0),t.resetCurrentSelection(),t.inOperation=!1}else{if(o.data.isFull())return void(t.inOperation=!1);if(!i)return void(t.inOperation=!1);t.inOperation=!0,t.moveGroupRings(t.currentRing,t.currentNut,o,(function(){I.instance.addLevelStep(),t.resetCurrentSelection(),t.checkAndDisplayNutCap(o),t.inOperation=!1,_.instance.emit(L.EVENT_ADD_PARTICLE_ROCK,[o,e.node])}))}}else{var u=o.getTopRingNode();u?(t.currentRing=u,t.currentNut=n,t.moveRingToSuspension(u,o),t.inOperation=!1):(console.log("螺母没有螺丝圈!"),t.inOperation=!1)}}},u.moveGroupRings=function(n,e,t,o){var r=this,i=e.getComponent(S),a=r.getGroupRings(n,e),c=t.getFreeSlots(),s=a.slice(0,c),u=[];!function e(a){if(a>=s.length)return u.length>0&&r.operationStack.push(u),void(o&&o());var c=s[a],l=function(){var n=r.createNutOperationRecord(c,i,t);u.push(n)};c===n?r.moveRingToSuspension(c,t,(function(){l(),r.moveRingToNut(c,t,!1),e(a+1)})):r.moveRingToSuspension(c,i,(function(){r.moveRingToSuspension(c,t,(function(){l(),r.moveRingToNut(c,t,!1),e(a+1)}))}))}(0)},u.getGroupRings=function(n,e){for(var t=e.getComponent(S).ringsNode.children,o=n.getComponent(E).color,r=[],i=!1,a=t.length-1;a>=0;a--){var c=t[a];if(c===n&&(i=!0),c.getComponent(E).color===o&&c.active)r.push(c);else if(i)break}return r},u.ringIndexForScrew=function(n){var e,t=null==(e=this.currentNut)?void 0:e.getComponent(S);return t?t.data.screws.indexOf(n):-1},u.moveRingToSuspension=function(n,e,t){k.playOneShot(k.getMusicIdName(5),1);var o=e.getSuspensionPosition();N(n).to(R,{worldPosition:o}).call((function(){t?(n.getComponent(E).stopHover(),t()):n.getComponent(E).suspensionEffect()})).start()},u.moveRingToNut=function(n,e,t,o){var r=this;if(void 0===t&&(t=!1),n){if(!t&&this.currentNut){var i=this.currentNut.getComponent(S);i.data.removeTopScrew()&&this.revealBelowScrews(i);var a=n.getComponent(E),c=new T(a.color);e.data.addScrew(c)}e.addRingNode(n,t,(function(){o&&o(),r.handlePostMoveLogic()}))}},u.handlePostMoveLogic=function(){this.checkLevelCompletion()&&(this.inOperation=!0,_.instance.emit(L.EVENT_ADD_PARTICLE_LEVEL_UP,this.node.parent),this.scheduleOnce((function(){M.inst.showUI(D)}),.5))},u.handleAdSuccess=function(){for(var n,e=i(this.nutNodes);!(n=e()).done;){var t=n.value.getComponent(S);if(t&&t.data.canGrow&&!t.data.isDone)return t.data.curScrews++,t.data.curScrews>=t.data.maxScrews&&(t.data.curScrews=t.data.maxScrews),void t.updateVisuals()}},u.revealBelowScrews=function(n){var e=n.data.screws;if(0!==e.length){for(var t=null,o=!1,r=e.length-1;r>=0;r--){var i=e[r];if(!i.isShow){t=i.color,o=!0;break}}if(o&&t){n.data.revealBelowScrews(t);var a=y[t];n.updateScrewVisibility(a)}}},u.checkAndDisplayNutCap=function(n){var e=n.data.checkIfGrouped(),t=n.data.isGroup;e&&t&&(n.displayNutCap(e),_.instance.emit(L.EVENT_ADD_PARTICLE_COLOR_BAR,n))},u.checkLevelCompletion=function(){for(var n,e=new Set,t=i(this.nutNodes);!(n=t()).done;){var o=n.value.getComponent(S);if(o&&o.data.checkIfGrouped()){var r=o.data.screws[0].color;e.add(r)}}var a=this.getLevelColors();return Array.from(e).filter((function(n){return a.includes(n)})).length>=a.length},u.getLevelColors=function(){return[].concat(this.levelColorStrings).map((function(n){return O[n]}))},u.resetCurrentSelection=function(){this.currentRing=null,this.currentNut=null},u.createNutOperationRecord=function(n,e,t){var o=e.node,r=t.node,i=1.4*(e.ringsNode.children.length-1),c=new C(0,i,0),s=1.4*t.ringsNode.children.length;return{fromNut:o,toNut:r,opNode:n,fromPosition:c,toPosition:new C(0,s,0),fromScreews:e.data.screws.map((function(n){return a({},n)})),toScreews:t.data.screws.map((function(n){return a({},n)}))}},u.onAddScrewHandler=function(){this.nutNodes&&this.handleAdSuccess()},u.onUndoHandler=function(){var n=c(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.undoLastOperation();case 2:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.undoLastOperation=function(){var n=c(s().mark((function n(){var e,t,o=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.operationStack&&!this.inOperation){n.next=2;break}return n.abrupt("return");case 2:if(this.inOperation=!0,e=function(){var n=c(s().mark((function n(){var e,t,r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=o.operationStack.pop(),n.prev=1,t=e.length-1;case 3:if(!(t>=0)){n.next=13;break}return r=e[t],(i=r.toNut).getComponent(S).displayNutCap(!1),_.instance.emit(L.EVENT_CLEAR_ALL_PARTICLE),n.next=10,o.undoRingNodeOperationAsync(i,r);case 10:t--,n.next=3;break;case 13:I.instance.backLevelStep(),o.inOperation=!1;case 15:return n.prev=15,o.inOperation=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,,15,18]])})));return function(){return n.apply(this,arguments)}}(),!this.currentNut){n.next=8;break}return t=this.currentNut.getComponent(S),n.next=8,new Promise((function(n){o.moveRingToNut(o.currentRing,t,!0,(function(){o.resetCurrentSelection(),n()}))}));case 8:return n.next=10,e();case 10:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.undoRingNodeOperationAsync=function(n,e){return new Promise((function(t){var o=n.getComponent(S);o?o.undoRingNodeOperation(e,(function(){t()})):t()}))},u.clearUndoStack=function(){this.operationStack=[]},u.clearData=function(){this.clearUndoStack(),this.resetCurrentSelection();for(var n,e=i(this.nutNodes);!(n=e()).done;){n.value.getComponent(S).initData()}this.inOperation=!1},u.onDestroy=function(){g.off(v.EventType.TOUCH_END,this.onTouchEnd),_.instance.off(L.EVENT_UNDO_REVOKE,this.onUndoHandler),_.instance.off(L.EVENT_ADD_SCREW,this.onAddScrewHandler)},e}(w)).prototype,"camera",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(z.prototype,"nutNodes",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=e(z.prototype,"levelColorStrings",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=z))||F));u._RF.pop()}}}));

System.register("chunks:///_virtual/Ring.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrewColor.ts"],(function(i){var e,t,o,n,r,a,s,u,l,c,h,p;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,s=i.CCString,u=i.Vec3,l=i.tween,c=i.Tween,h=i.Component},function(i){p=i.ScrewColor}],execute:function(){var g,f,d,v,b,y,w,z,m,H;r._RF.push({},"9d25eWEJKlF26xhfDxnGv41","Ring",void 0);var x=a.ccclass,F=a.property;i("Ring",(g=x("Ring"),f=F(s),g((b=e((v=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=i.call.apply(i,[this].concat(r))||this,o(e,"color",b,n(e)),o(e,"colorName",y,n(e)),o(e,"hoverHeight",w,n(e)),o(e,"hoverWidth",z,n(e)),o(e,"duration",m,n(e)),o(e,"colorHex",H,n(e)),e.originalPosition=new u,e}t(e,i);var r=e.prototype;return r.onLoad=function(){this.originalPosition=this.node.position},r.suspensionEffect=function(){var i=this.node.position,e=new u(i.x-this.hoverWidth,i.y+this.hoverHeight,i.z),t=new u(i.x+this.hoverWidth,i.y+this.hoverHeight,i.z),o=new u(i.x-this.hoverWidth,i.y-this.hoverHeight,i.z),n=new u(i.x+this.hoverWidth,i.y-this.hoverHeight,i.z);l(this.node).sequence(l().to(this.duration,{position:e},{easing:"sineInOut"}),l().to(this.duration,{position:t},{easing:"sineInOut"}),l().to(this.duration,{position:n},{easing:"sineInOut"}),l().to(this.duration,{position:o},{easing:"sineInOut"})).repeatForever().start()},r.stopHover=function(){c.stopAllByTarget(this.node)},e}(h)).prototype,"color",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.PINK}}),y=e(v.prototype,"colorName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"粉红"}}),w=e(v.prototype,"hoverHeight",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),z=e(v.prototype,"hoverWidth",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),m=e(v.prototype,"duration",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),H=e(v.prototype,"colorHex",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#FFF"}}),d=v))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/RoosterNutEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./tgx.ts","./UIDef.ts","./GameEvent.ts","./LevelMgr.ts","./UserMgr.ts","./LevelModel.ts","./NutGameAudioMgr.ts","./NutComponent.ts","./Ring.ts","./Utils.ts","./UIMgr.ts"],(function(e){var t,n,i,r,o,a,l,c,s,u,E,p,f,d,_,h,A,T,L,P,v,I,N,R,C,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,a=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Node,E=e.Prefab,p=e.instantiate,f=e.ParticleSystem,d=e.v3,_=e.Component},function(e){h=e.EventDispatcher},null,function(e){A=e.UI_TopInfo},function(e){T=e.GameEvent},function(e){L=e.LevelManager},function(e){P=e.UserManager},function(e){v=e.TYPE_GAME_STATE},function(e){I=e.NutGameAudioMgr},function(e){N=e.NutComponent},function(e){R=e.Ring},function(e){C=e.GameUtil},function(e){g=e.UIMgr}],execute:function(){var D,m,y,b,V,B,S,U,M,G,O,z,x,w,k,F,H;c._RF.push({},"22bc0IdkC5Oc4VyIJPSPFhR","RoosterNutEntry",void 0);var W=s.ccclass,K=s.property;e("RoosterNutEntry",(D=W("RoosterNutEntry"),m=K(u),y=K(u),b=K(E),V=K(E),B=K(E),S=K(E),U=K(E),D((O=t((G=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"gameUI",O,r(t)),i(t,"btnsLayout",z,r(t)),i(t,"particleRock",x,r(t)),i(t,"particleDust",w,r(t)),i(t,"particleColorBar",k,r(t)),i(t,"particleOpenBox",F,r(t)),i(t,"particleWinner",H,r(t)),t.particleNodes=[],t}n(t,e);var c=t.prototype;return c.onLoad=function(){I.initilize(),I.play(I.getMusicIdName(1),1)},c.start=function(){this.initilize(),this.addEventListen()},c.initilize=function(){var e=a(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initilizeUI(),L.instance.parent=this.node,L.instance.initilizeModel(),P.instance.initilizeModel(),t=L.instance.levelModel.level,e.next=7,L.instance.loadLevel(t);case 7:h.instance.emit(T.EVENT_UI_INITILIZE),g.inst.showUI(A);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.initilizeUI=function(){},c.addEventListen=function(){h.instance.on(T.EVENT_GAME_START,this.onGameStart,this),h.instance.on(T.EVENT_BATTLE_SUCCESS_LEVEL_UP,this.levelUpHandler,this),h.instance.on(T.EVENT_BATTLE_FAIL_LEVEL_RESET,this.resetGameByLose,this),h.instance.on(T.EVENT_ADD_PARTICLE_ROCK,this.onAddParticleRock,this),h.instance.on(T.EVENT_ADD_PARTICLE_DUST,this.onAddParticleDust,this),h.instance.on(T.EVENT_ADD_PARTICLE_COLOR_BAR,this.onAddParticleColorBar,this),h.instance.on(T.EVENT_ADD_PARTICLE_OPEN_BOX,this.onAddParticleOpenBox,this),h.instance.on(T.EVENT_ADD_PARTICLE_LEVEL_UP,this.onAddParticleWinner,this),h.instance.on(T.EVENT_CLEAR_ALL_PARTICLE,this.onClearAllParticle,this)},c.onDestroy=function(){h.instance.off(T.EVENT_GAME_START,this.onGameStart),h.instance.off(T.EVENT_BATTLE_SUCCESS_LEVEL_UP,this.levelUpHandler),h.instance.off(T.EVENT_BATTLE_FAIL_LEVEL_RESET,this.resetGameByLose),h.instance.off(T.EVENT_ADD_PARTICLE_ROCK,this.onAddParticleRock),h.instance.off(T.EVENT_ADD_PARTICLE_DUST,this.onAddParticleDust),h.instance.off(T.EVENT_ADD_PARTICLE_LEVEL_UP,this.onAddParticleWinner),h.instance.off(T.EVENT_CLEAR_ALL_PARTICLE,this.onClearAllParticle),h.instance.off(T.EVENT_ADD_PARTICLE_COLOR_BAR,this.onAddParticleColorBar),h.instance.off(T.EVENT_ADD_PARTICLE_OPEN_BOX,this.onAddParticleOpenBox)},c.onGameStart=function(){},c.levelUpHandler=function(){this.onClearAllParticle(),L.instance.clearLevelData(),L.instance.upgradeLevel(),this.loadLevelInfo(),L.instance.levelModel.curGameState=v.GAME_STATE_INIT},c.resetGameByLose=function(){L.instance.clearLevelData(),this.loadLevelInfo(),L.instance.levelModel.curGameState=v.GAME_STATE_INIT},c.loadLevelInfo=function(){var e=L.instance.levelModel.level;L.instance.loadLevel(e)},c.onAddParticleRock=function(e){var t=e[0],n=this.createParticle(this.particleRock,t.getTopRingNode());this.particleNodes.push(n)},c.onAddParticleDust=function(e){var t=e.children.reduce((function(e,t){return t.active&&(!e||t.getSiblingIndex()>e.getSiblingIndex())?t:e}),null);if(t){var n=this.createParticle(this.particleDust,t);this.particleNodes.push(n)}},c.onAddParticleColorBar=function(e){var t=e.getComponent(N).getTopRingNode().getComponent(R).colorHex,n=this.createParticle(this.particleColorBar,e.node,t);this.particleNodes.push(n)},c.onAddParticleOpenBox=function(e){var t=e[0],n=e[1],i=this.createParticle(this.particleOpenBox,t,n);this.particleNodes.push(i)},c.onAddParticleWinner=function(e){var t=this.createParticle(this.particleWinner,e);this.particleNodes.push(t)},c.createParticle=function(e,t,n){var i=p(e),r=i.getComponent(f);if(r&&n){var o=C.hexToRGBA(n);r.startColor.color=o}return i.setParent(t),i.setPosition(d(0,0,1)),i},c.onClearAllParticle=function(){for(var e,t=o(this.particleNodes);!(e=t()).done;){var n=e.value;n.removeFromParent(),n.destroy()}},t}(_)).prototype,"gameUI",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(G.prototype,"btnsLayout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(G.prototype,"particleRock",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(G.prototype,"particleDust",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(G.prototype,"particleColorBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(G.prototype,"particleOpenBox",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(G.prototype,"particleWinner",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=G))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/ScrewColor.ts",["cc"],(function(E){var L;return{setters:[function(E){L=E.cclegacy}],execute:function(){var r;L._RF.push({},"ea7bex6YvpLfLzzSsNERxUE","ScrewColor",void 0);var e=E("ScrewColor",function(E){return E[E.Unknow=0]="Unknow",E[E.EMPTY=-1]="EMPTY",E[E.PINK=1]="PINK",E[E.BLUE=2]="BLUE",E[E.YELLOW=3]="YELLOW",E[E.GREEN=4]="GREEN",E[E.ORANGE=5]="ORANGE",E[E.WHITE=6]="WHITE",E[E.PURPLE=7]="PURPLE",E[E.BLACK=8]="BLACK",E[E.PALEPINK=9]="PALEPINK",E[E.RED=10]="RED",E}({}));E("HexScrewColor",((r={})[e.PINK]="#FC6294",r[e.BLUE]="#26A1EF",r[e.YELLOW]="#FAB524",r[e.GREEN]="#5CC931",r[e.ORANGE]="#FFA500",r[e.WHITE]="#CE76F0",r[e.PURPLE]="#752FF1",r[e.BLACK]="#323135",r[e.PALEPINK]="#FF6E61",r[e.RED]="#F03636",r));L._RF.pop()}}}));

System.register("chunks:///_virtual/ScrewComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,t,r;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,r=e.Component}],execute:function(){var c;o._RF.push({},"35506NYb4RHwa73jfcOa0OA","ScrewComponent",void 0);var s=t.ccclass;t.property,e("ScrewComponent",s("ScrewComponent")(c=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/ScrewData.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"fb5806dkThBvbk7f4x0qokM","ScrewData",void 0);t("ScrewData",(function(t,c){void 0===c&&(c=!1),this.color=void 0,this.isShow=void 0,this.color=t,this.isShow=c}));c._RF.pop()}}}));

System.register("chunks:///_virtual/UI_BattleResult_Impl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./tgx.ts","./GameUILayers.ts","./UIDef.ts","./GameEvent.ts","./NutGameAudioMgr.ts","./LevelMgr.ts","./UserMgr.ts","./Layout_BattleResult.ts","./AdvertMgr.ts","./NutComponent.ts","./GtagMgr.ts","./ModuleContext.ts"],(function(t){var e,n,a,i,s,o,r,l,u,c,d,f,h,v,E,m,g,y,_,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t.Vec3,i=t.tween,s=t.v3,o=t.Tween,r=t.isValid},function(t){l=t.EventDispatcher},null,function(t){u=t.GameUILayers},function(t){c=t.UI_BattleResult},function(t){d=t.GameEvent},function(t){f=t.NutGameAudioMgr},function(t){h=t.LevelManager},function(t){v=t.UserManager},function(t){E=t.Layout_BattleResult},function(t){m=t.AdvertMgr},function(t){g=t.duration},function(t){y=t.GtagMgr,_=t.GtagType},function(t){p=t.ModuleContext}],execute:function(){n._RF.push({},"60a4313NlFJpqUrSRZVVrBe","UI_BattleResult_Impl",void 0);var M=t("UI_BattleResult_Impl",function(t){function n(){var e;return(e=t.call(this,"Prefabs/UI/Result/UI_BattleResult",u.POPUP,E)||this).rewardBase=0,e.rewardAdditional=0,e.timeoutIds=[],e.win=!0,e}e(n,t);var c=n.prototype;return c.getRes=function(){return[]},c.onCreated=function(){var t=this;this.playStartEffect();var e=(this.win,3);f.playOneShot(f.getMusicIdName(e),1);var n=this.layout;this.onButtonEvent(n.btNext,(function(){f.playOneShot(f.getMusicIdName(5),1),t.onClickRewardBase()})),this.rotationLight(),this.updateStar();var a=h.instance.levelModel.level;y.inst.doGameDot(_.level_end,{level:a})},c.playStartEffect=function(){var t=this.layout.winNode;t.setScale(new a(0,0,0)),i(t).to(g,{scale:new a(1,1,1)}).start()},c.rotationLight=function(){var t=this.layout.light;t.eulerAngles=s(0,0,0),i(t).repeatForever(i().to(5,{eulerAngles:new a(0,0,360)},{easing:"linear"}).call((function(){t.eulerAngles=new a(0,0,0)}))).start()},c.updateStar=function(){var t=this,e=h.instance.levelModel.star,n=this.layout.levStars,s=8;n.children.forEach((function(n,o){var r=n.getChildByName("Sprite");r.active=!1;var l=setTimeout((function(){r.active=o<e,r.active&&(f.playOneShot(f.getMusicIdName(s),1),r.scale=new a(1.4,1.4,1.4),i(r).to(.3,{scale:new a(1,1,1)}).start()),s++}),500*o);t.timeoutIds.push(l)}))},c.emitEvent=function(){this.win?l.instance.emit(d.EVENT_BATTLE_SUCCESS_LEVEL_UP):l.instance.emit(d.EVENT_BATTLE_FAIL_LEVEL_RESET)},c.onClickRewardBase=function(){v.instance.addMoney(this.rewardBase),l.instance.emit(d.EVENT_USER_MONEY_UPDATE),this.emitEvent(),this.destoryMyself()},c.addAdverHandler=function(){var t=this;m.instance.showReawardVideo((function(){v.instance.addMoney(t.rewardAdditional),l.instance.emit(d.EVENT_USER_MONEY_UPDATE),t.emitEvent(),t.destoryMyself()}))},c.clearAllTimeouts=function(){this.timeoutIds.forEach((function(t){return clearTimeout(t)})),this.timeoutIds=[]},c.destoryMyself=function(){o.stopAllByTarget(this.node),r(this.node)&&(this.node.removeFromParent(),this.node.destroy()),this.clearAllTimeouts()},n}(c));p.attachImplClass(c,M),n._RF.pop()}}}));

System.register("chunks:///_virtual/UI_TopInfo_Impl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./tgx.ts","./GameUILayers.ts","./UIDef.ts","./GameEvent.ts","./NutGameAudioMgr.ts","./LevelMgr.ts","./Layout_TopInfo.ts","./UIMgr.ts","./ModuleContext.ts"],(function(t){var e,n,o,i,s,a,l,r,u,p,c,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.EventDispatcher},null,function(t){i=t.GameUILayers},function(t){s=t.UI_Setting,a=t.UI_TopInfo},function(t){l=t.GameEvent},function(t){r=t.NutGameAudioMgr},function(t){u=t.LevelManager},function(t){p=t.Layout_TopInfo},function(t){c=t.UIMgr},function(t){f=t.ModuleContext}],execute:function(){n._RF.push({},"b4866NAUrpDopWjgeZuxK3v","UI_TopInfo_Impl",void 0);var E=t("UI_TopInfo_Impl",function(t){function n(){var e;return(e=t.call(this,"Prefabs/UI/TopInfo/UI_TopInfo",i.OVERLAY,p)||this).rollingTween=null,e}e(n,t);var a=n.prototype;return a.getRes=function(){return[]},a.onCreated=function(){this.initilizeUI(),this.addListener()},a.initilizeUI=function(){this.updateLevelLb(),this.onUpdateStarStep();var t=this.layout;this.onButtonEvent(t.btSet,(function(){r.playOneShot(r.getMusicIdName(5),1),c.inst.isShowing(s)||c.inst.showUI(s)})),this.onButtonEvent(t.btReLoad,(function(){r.playOneShot(r.getMusicIdName(5),1),o.instance.emit(l.EVENT_BATTLE_FAIL_LEVEL_RESET)}))},a.addListener=function(){o.instance.on(l.EVENT_UPDATE_STAR_STEP,this.onUpdateStarStep,this),o.instance.on(l.EVENT_BATTLE_SUCCESS_LEVEL_UP,this.levelUpHandler,this),o.instance.on(l.EVENT_BATTLE_FAIL_LEVEL_RESET,this.resetGameByLose,this)},a.updateLevelLb=function(){var t=u.instance.levelModel.level;this.layout.lbLevel.string="LEVEL."+t},a.onUpdateStarStep=function(){this.updateStep(),this.updateStar(),this.updateStepProgress()},a.updateStep=function(){var t=u.instance.levelModel,e=t.levelConfig,n=t.playerStep,o=this.layout.lbRemainingSteps,i=Math.floor(e.step-n);i<=0&&(i=0),o.string=i},a.updateStepProgress=function(){var t=u.instance.levelModel,e=t.levelConfig,n=t.playerStep,o=this.layout.levProgress,i=Math.floor(e.step-n);if(i<=0)i=0;else{var s=o.totalLength,a=Math.floor(1e4*i/e.step)/1e4*s;o.progress=a/s}},a.updateStar=function(){var t=u.instance.levelModel.star;this.layout.levStars.children.forEach((function(e,n){e.getChildByName("Sprite").active=n<t}))},a.levelUpHandler=function(){this.updateLevelLb(),this.onUpdateStarStep()},a.resetGameByLose=function(){this.updateLevelLb(),this.onUpdateStarStep()},a.onDispose=function(){o.instance.off(l.EVENT_UPDATE_STAR_STEP,this.onUpdateStarStep),o.instance.off(l.EVENT_BATTLE_SUCCESS_LEVEL_UP,this.levelUpHandler),o.instance.off(l.EVENT_BATTLE_FAIL_LEVEL_RESET,this.resetGameByLose)},n}(a));f.attachImplClass(a,E),n._RF.pop()}}}));

System.register("chunks:///_virtual/UserMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./GameEvent.ts","./UserModel.ts"],(function(e){var n,t,s,o,r,i;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,s=e._decorator},function(e){o=e.EventDispatcher},function(e){r=e.GameEvent},function(e){i=e.UserModel}],execute:function(){var c,u;t._RF.push({},"2b247EGwUJJ4IAgHwMbYlBT","UserMgr",void 0);var a=s.ccclass;s.property,e("UserManager",a("UserManager")(((u=function(){function e(){this.userModel=void 0}var t=e.prototype;return t.initilizeModel=function(){this.userModel=new i},t.checkEnough=function(e){return this.userModel.money-e>=0},t.deductMoney=function(e){var n=this.userModel.money;this.userModel.money=n-e,console.log("剩余金钱:"+this.userModel.money),o.instance.emit(r.EVENT_USER_MONEY_UPDATE)},t.addMoney=function(e){var n=this.userModel.money;this.userModel.money=n+e,o.instance.emit(r.EVENT_USER_MONEY_UPDATE)},n(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,c=u))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"d02eahI91VFjowc9argumK2","UserModel",void 0);e("UserModel",function(){function e(){this._level=1,this._money=1e4,this._nickName="落山鸡"}return t(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"money",get:function(){return this._money},set:function(e){this._money=e}},{key:"nickName",get:function(){return this._nickName},set:function(e){this._nickName=e}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"93a09PWmelABaoxY9woX5hS","Utils",void 0);t("GameUtil",function(){function t(){}return t.formatToTimeString=function(t){var n=Math.floor(t/60),r=t%60;return String(n).padStart(2,"0")+":"+String(r).padStart(2,"0")},t.formatWeight=function(t){return t<1e3?t+"KG":Math.floor(t/1e3*100)/100+"T"},t.hexToRGBA=function(t,n){return void 0===n&&(n=255),3===(t=t.replace(/^#/,"")).length&&(t=t.split("").map((function(t){return t+t})).join("")),{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:n}},t}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/module_nut', 'chunks:///_virtual/module_nut'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});